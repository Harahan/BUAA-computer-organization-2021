# p5课上第一次

献出首挂。。。但第二题错在了一个神奇的地方，第三题太复杂就没碰，助教说``p5``一共过了``10``个人，并且延长到了``9``点半

先说说第二题吧

```
bonall:
opcode  rs  rt   offest
6       5   5     16

I:   target_offest<-sign(offest||0^2)
     condition <- GPR[rs] + GPR[rt] = 0
     GPR[31]<-PC + 8
  
I+1: if condition:
				PC <- PC + starget_offest	
      else:
		        NullilyCurrentInstruction()
	  endif
		        
		        
Tips(当时考场给了)：32'h8000_0000,32'h8000_0000不是相反数
```

简单来说就是判断两个数是不是相反数决定跳不跳转，不跳清空延迟槽，跳就不清，注意无条件链接

好了接下来说说我自己的问题：

* 首先，我无条件链接以及跳转处理还有清延迟槽应该没有问题，（看了许多往届博客，注意如果该条指令被阻塞在``D``级时不跳转时不清延迟槽）
* 我死在了关于相反数判断上，主要是我是通过``res = GPR[rs]+GPR[rt]``等于``0``判断是不是相反数，但是我想到如果是``Tips``那种情况就不行，于是我就``res``取``33``位，这样``Tips``那种情况加起来就是``33'b1000...``了，但我没注意如果两个相反数只要不是两个``0``，那么它们加起来也是``33'b1000...``，所以报错是我执行了下一条指令，考完后助教和我说我没有执行延迟槽指令，我想不可能我本地测的时候跳不跳行为与``mars``一致，真相是，我在本地跳转是用``bonall $0, $0 bench``测的，而如果我用的两个相反数是别的就不会跳，因为``res[32:0]``不为``0``，所以我没有执行延迟槽指令是因为我判断``res``不为``0``，于是不跳转就把延迟槽清了
* 如果是在``p4``我一定``de``出这个``bug``了，但是它是``p5``，我就一直在在找是不是我看到的那些博客不全面，转发阻塞还有没考虑到的情况，我感觉自己可以重开了。。。

